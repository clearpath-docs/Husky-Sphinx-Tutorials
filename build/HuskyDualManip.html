



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Husky Dual UR5 Mobile Manipulation Demo (Simulation) &mdash; Husky UGV Tutorials 0.5.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/clearpath.css" type="text/css" />
  

  
    <link rel="top" title="Husky UGV Tutorials 0.5.1 documentation" href="index.html"/>
        <link rel="next" title="Husky Packages" href="HuskyPackages.html"/>
        <link rel="prev" title="Husky UR5 Mobile Manipulation Demo (Simulation)" href="HuskyManip.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  <!-- Start of clearpathrobotics Zendesk Widget script -->
<script>/*<![CDATA[​*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","clearpathrobotics.zendesk.com");/*​]]>*/</script>
<!-- End of clearpathrobotics Zendesk Widget script -->

<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-65409991-1', 'auto');
 ga('send', 'pageview');

</script>


</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Husky UGV Tutorials
          

          
            
            <img src="_static/clearpathlogo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="BackUpHusky.html">Backing Up Husky Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="InstallHuskySoftware.html">Install and Configure Husky Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="CustomizeHuskyConfig.html">Customize Husky Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Husky</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="SimulatingHusky.html">Simulating Husky</a></li>
<li class="toctree-l1"><a class="reference internal" href="InterfacingWithHusky.html">Interfacing with Husky</a></li>
</ul>
<p class="caption"><span class="caption-text">Demo Applications: Navigation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HuskyMove.html">Husky Move Base Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyAMCL.html">Husky AMCL Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyGmapping.html">Husky Gmapping Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyFrontiers.html">Husky Frontier Exploration Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyGPSWaypointNav.html">Husky Outdoor GPS Waypoint Navigation</a></li>
</ul>
<p class="caption"><span class="caption-text">Demo Applications: Manipulation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="HuskyManip.html">Husky UR5 Mobile Manipulation Demo (Simulation)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Husky Dual UR5 Mobile Manipulation Demo (Simulation)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#controlling-the-grippers">Controlling The Grippers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#navigation-and-mapping-with-the-dual-ur5-husky">Navigation And Mapping with the Dual UR5 Husky</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Package Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HuskyPackages.html">Husky Packages</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Husky UGV Tutorials</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
     
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="http://support.clearpathrobotics.com">Home</a> &raquo;</li>
      
    <li>Husky Dual UR5 Mobile Manipulation Demo (Simulation)</li>
      <li class="wy-breadcrumbs-aside">
        <div class="roslogo">
      </div>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="husky-dual-ur5-mobile-manipulation-demo-simulation">
<h1>Husky Dual UR5 Mobile Manipulation Demo (Simulation)<a class="headerlink" href="#husky-dual-ur5-mobile-manipulation-demo-simulation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This tutorial assumes you have ROS Indigo installed, Gazebo, RViz, and a computer that is able to  handle simulations and inverse kinematics. If you wish to work with the real Clearpath Robotics Dual UR5 Husky, please see www.clearpathrobotics.com.</p>
</div>
<img alt="_images/DualScaled.jpg" src="_images/DualScaled.jpg" />
<p>The Husky dual UR5 is an out of the box solution to dual arm mobile manipulation! It comes installed with all associated ROS drivers, as well as a MoveIT! configuration for both arms. We&#8217;re also able to add whatever sensors you may require for your research needs!</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>On a real platform purchased from Clearpath Robotics AND in Simulation</p>
<p>If you have the Dual UR5 integration setup from Clearpath Robotics, you may use this tutorial to revert your Husky&#8217;s workspace back to a working state. This tutorial can also be used to run the simulator of this platform without purchase.</p>
<p>All of the packages used in this demo can be found at <a class="reference external" href="https://github.com/DualUR5Husky">https://github.com/DualUR5Husky</a></p>
<div class="code bash highlight-python"><div class="highlight"><pre>mkdir -p ~/dual_ws/src
cd ~/dual_ws/src &amp;&amp; catkin_init_workspace
git clone https://github.com/DualUR5Husky/husky
git clone https://github.com/DualUR5Husky/ur_modern_driver
git clone https://github.com/DualUR5Husky/universal_robot
git clone https://github.com/DualUR5Husky/robotiq
git clone https://github.com/DualUR5Husky/husky_simulator
git clone https://github.com/DualUr5Husky/flir_ptu
cd ..
</pre></div>
</div>
<p>If there are outstanding dependencies, you may install them using</p>
<div class="code bash highlight-python"><div class="highlight"><pre>sudo apt-get update

rosdep install --from-paths src --ignore-src --rosdistro=indigo -y
</pre></div>
</div>
<p>Finally build your workspace using</p>
<div class="code bash highlight-python"><div class="highlight"><pre>catkin_make install
source ~/dual_ws/devel/setup.bash
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage:<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The dual UR5 Husky is easy to start working with! All the packages you&#8217;ll need are conveniently located in one place, and there&#8217;s no need to worry about setting parameters or customer configuration. Just follow the steps below to bring up the robot&#8217;s simulation environment, afterwards, we&#8217;ll get into how to move your new robot!</p>
<div class="code bash highlight-python"><div class="highlight"><pre>roslaunch husky_gazebo husky_empty_world.launch
</pre></div>
</div>
<p>The terminal screen should report no errors and look like this:</p>
<img alt="_images/Selection_191.png" src="_images/Selection_191.png" />
<p>Gazebo should pop up now. The arms will go through some movement behaviours to rest them back at their home position, and then the robot should look like this:</p>
<img alt="_images/Selection_192.png" src="_images/Selection_192.png" />
<p>To launch the interact with the robot within Rviz, open a new terminal, source your workspace once again, and laucnh the moveit interface:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>source ~/dual_ws/devel/setup.bash
roslaunch husky_dual_ur5_moveit_config demo.launch
</pre></div>
</div>
<p>and the Rviz screen will appear:</p>
<img alt="_images/Selection_193.png" src="_images/Selection_193.png" />
<p>This custom rviz configuration has three views by default. The top most view is the camera feed coming from the bumblebee with respect to the robots frame. The bottom left view is the MoveIt! planning plugin pipeline. The one in the bottom right is the visualization of the robot state. Dragging the orbs around the arm will allow you to position the arm any way you want.</p>
<p>Try dragging the arm around:</p>
<img alt="_images/Selection_194.png" src="_images/Selection_194.png" />
<p>To get the arm to finally plan and execute its position in Gazebo, use the motion planning plugin:</p>
<img alt="_images/Selection_195.png" src="_images/Selection_195.png" />
<p>DISCLAIMER: If you experience problems planning. Check the &#8220;Status&#8221; tab of the MoveIt! plugin in RViz. If there are any detected collisions, you will have to disable them inside the config/husky.srdf file. If you copy
and paste the text from the status output and put it inside a text file, you can generate some xml using the generate_collisions.py script. Otherwise, read the husky.srdf and find the disable_collision tags, it will be pretty straightforward what to add.</p>
<p>The arm should be fully extended in Gazebo (or to wherever you specified to move it)</p>
<img alt="_images/Selection_196.png" src="_images/Selection_196.png" />
<p>To move the other arm, open up the planning window to change the &#8220;Planning Request&#8221; name. Go to Rviz&#8217;s top menu bar and find &#8220;Panels&#8221; and then select &#8220;Displays&#8221; which will open another window in the Rviz screen:</p>
<img alt="_images/Selection_197.png" src="_images/Selection_197.png" />
<p>Click on &#8220;MotionPlanning&#8221; and expand it down and find the &#8220;Planning Request&#8221; drop down. Change it to &#8220;left_arm&#8221; and notice the orb moves to the left arm so you can position that.</p>
<img alt="_images/Selection_198.png" src="_images/Selection_198.png" />
<p>Clicking &#8220;plan and execute&#8221; also works once you move it, you will see it move in Gazebo. Note sometimes it <em>may</em> fail, you will just have to plan and execute again if it doesn&#8217;t find a path the first time.</p>
<p>The final position of the arms in Gazebo after execution:</p>
<img alt="_images/Selection_199.png" src="_images/Selection_199.png" />
</div>
<div class="section" id="controlling-the-grippers">
<h2>Controlling The Grippers<a class="headerlink" href="#controlling-the-grippers" title="Permalink to this headline">¶</a></h2>
<p>The grippers are controlled (from an end user perspective), by a neat little script made by Robotiq. Run this command to bring up the gripper controller. Change topic:= to either /left_hand/ or /right_hand/ depending on which gripper you want to move.</p>
<div class="code bash highlight-python"><div class="highlight"><pre>rosrun robotiq_s_model_control SModelSimpleController.py _topic:=/left_hand/command
</pre></div>
</div>
<p>An interactive command line should come up:</p>
<img alt="_images/Selection_200.png" src="_images/Selection_200.png" />
<p>typing &#8220;a&#8221; will activate it, and then &#8220;o&#8221; will open it. It should look like this:</p>
<img alt="_images/Selection_201.png" src="_images/Selection_201.png" />
<p>typing &#8220;p&#8221; will pinch it close like so</p>
<img alt="_images/Selection_202.png" src="_images/Selection_202.png" />
</div>
<div class="section" id="navigation-and-mapping-with-the-dual-ur5-husky">
<h2>Navigation And Mapping with the Dual UR5 Husky<a class="headerlink" href="#navigation-and-mapping-with-the-dual-ur5-husky" title="Permalink to this headline">¶</a></h2>
<p>Start the husky gazebo from scratch using the playpen so there will be objects:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>roslaunch husky_gazebo husky_playpen.launch
</pre></div>
</div>
<p>Bring up the mapping demo:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>roslaunch husky_navigation gmapping_demo.launch
</pre></div>
</div>
<p>Bring up the visualization for it:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>roslaunch husky_viz view_robot.launch
</pre></div>
</div>
<p>Now, you will be able to map, navigate, and control the robot. Use the interactive markers to drive it around. Please see these pictures for instructions:</p>
<p>Spawning in playpen:</p>
<img alt="_images/Selection_204.png" src="_images/Selection_204.png" />
<p>When the Rviz starts, make sure you turn navigation on by clicking in the display window, should look like this:</p>
<img alt="_images/Selection_205.png" src="_images/Selection_205.png" />
<p>Move it around and it will build its map (using the interactive markers)</p>
<img alt="_images/Selection_206.png" src="_images/Selection_206.png" />
<p>Use 2D Nav Goal to select points on the map for your Husky to navigate to!</p>
<img alt="_images/Selection_207.png" src="_images/Selection_207.png" />
<p>Related links
<a class="reference external" href="https://www.youtube.com/watch?v=vymJBbnz6bQ">https://www.youtube.com/watch?v=vymJBbnz6bQ</a> - A demonstration by Clearpath Robotics
<a class="reference external" href="http://www.bbc.com/news/uk-scotland-39330441">http://www.bbc.com/news/uk-scotland-39330441</a> - Featured by BBC UK article</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="HuskyPackages.html" class="btn btn-neutral float-right" title="Husky Packages" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="HuskyManip.html" class="btn btn-neutral" title="Husky UR5 Mobile Manipulation Demo (Simulation)" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Clearpath Robotics.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>