



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Interfacing with Husky &mdash; Husky UGV Tutorials 0.5.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/clearpath.css" type="text/css" />
  

  
    <link rel="top" title="Husky UGV Tutorials 0.5.1 documentation" href="index.html"/>
        <link rel="next" title="Husky Move Base Demo" href="HuskyMove.html"/>
        <link rel="prev" title="Simulating Husky" href="SimulatingHusky.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  <!-- Start of clearpathrobotics Zendesk Widget script -->
<script>/*<![CDATA[​*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","clearpathrobotics.zendesk.com");/*​]]>*/</script>
<!-- End of clearpathrobotics Zendesk Widget script -->

<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-65409991-1', 'auto');
 ga('send', 'pageview');

</script>


</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Husky UGV Tutorials
          

          
            
            <img src="_static/clearpathlogo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="BackUpHusky.html">Backing Up Husky Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="InstallHuskySoftware.html">Install and Configure Husky Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="CustomizeHuskyConfig.html">Customize Husky Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Husky</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SimulatingHusky.html">Simulating Husky</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Interfacing with Husky</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#control">Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#odometry">Odometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#diagnostics">Diagnostics</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Demo Applications: Navigation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HuskyMove.html">Husky Move Base Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyAMCL.html">Husky AMCL Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyGmapping.html">Husky Gmapping Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyFrontiers.html">Husky Frontier Exploration Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyGPSWaypointNav.html">Husky Outdoor GPS Waypoint Navigation</a></li>
</ul>
<p class="caption"><span class="caption-text">Demo Applications: Manipulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HuskyManip.html">Husky UR5 Mobile Manipulation Demo (Simulation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="HuskyDualManip.html">Husky Dual UR5 Mobile Manipulation Demo (Simulation)</a></li>
</ul>
<p class="caption"><span class="caption-text">Package Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HuskyPackages.html">Husky Packages</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Husky UGV Tutorials</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
     
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="http://support.clearpathrobotics.com">Home</a> &raquo;</li>
      
    <li>Interfacing with Husky</li>
      <li class="wy-breadcrumbs-aside">
        <div class="roslogo">
      </div>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interfacing-with-husky">
<h1>Interfacing with Husky<a class="headerlink" href="#interfacing-with-husky" title="Permalink to this headline">¶</a></h1>
<p>Both simulated and real Husky robots expose the same ROS interface, and can be interacted with in the same way. Please make sure that the desktop packages for Husky are installed:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>$ sudo apt-get install ros-indigo-husky-desktop
</pre></div>
</div>
<div class="section" id="visualization">
<h2>Visualization<a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h2>
<p>You may start a preconfigured <a class="reference external" href="http://wiki.ros.org/rviz">rviz</a> instance using the following command:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>$ roslaunch husky_viz view_robot.launch
</pre></div>
</div>
</div>
<div class="section" id="control">
<h2>Control<a class="headerlink" href="#control" title="Permalink to this headline">¶</a></h2>
<p>There are three quick ways to send your Husky control commands:</p>
<ol class="arabic simple">
<li>Using the provided Logitech gamepad. The left analog stick controls the velocity and turn rate, while the &#8216;A&#8217; and &#8216;X&#8217; button activate the regular and extra speed modes, respectively.</li>
<li>Using the rviz instance above. If you select the Interact option in the top toolbar, an interactive marker will appear around the Husky and can be used to control speed.</li>
<li>The <a class="reference external" href="http://wiki.ros.org/rqt_robot_steering">rqt_robot_steering plugin</a>. Run the rqt command, and select <strong>Plugins-&gt;Robot Tools-&gt;Robot Steering</strong> from the top menu.</li>
</ol>
<p>Husky uses <a class="reference external" href="http://wiki.ros.org/twist_mux">twist_mux</a> to mix four separate <a class="reference external" href="http://docs.ros.org/api/geometry_msgs/html/msg/Twist.html">geometry_msgs/Twist</a> control channels into the <code class="docutils literal"><span class="pre">husky_velocity_controller/cmd_vel</span> <span class="pre">topic</span></code>.</p>
<p>These channels are (in order of decreasing priotity):</p>
<div class="wy-table-responsive">
<table border="1" class="docutils">
<col width="25%">
<col width="25%">
<thead valign="bottom">
  <tr class="row-odd">
    <th class="head">Topic</th>
    <th class="head">Description</th>
    <th class="head">Priority</th>
  </tr>
 </thead>
 <tbody valign="top">
  <tr class="row-even">
    <td>joy_teleop/cmd_vel</td>
    <td>Joystick teleop input</td>
    <td>10</td>
  </tr>
  <tr class="row-odd">
    <td>twist_marker_server/cmd_vel</td>
    <td>Interactive marker teleop input</td>
    <td>8</td>
  </tr>
  <tr class="row-even">
    <td>move_base/cmd_vel</td>
    <td>Autonomous movement input, for the,husky_navigation samples</td>
    <td>2</td>
  </tr>
  <tr class="row-odd">
    <td>cmd_vel</td>
    <td>Miscellaneous external input</td>
    <td>1</td>
  </tr>
  </tbody>
</table><p>Additional velocity channels can be defined in <a class="reference external" href="https://github.com/husky/husky_control/blob/indigo-devel/config/twist_mux.yaml">twist_mux.yaml</a>, or can be piped into the lowest-priority cmd_vel topic.</p>
</div>
<div class="section" id="odometry">
<h2>Odometry<a class="headerlink" href="#odometry" title="Permalink to this headline">¶</a></h2>
<p>Husky publishes odometry information on the odometry/filtered topic, as <a class="reference external" href="http://docs.ros.org/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry messages</a>. These are generated by <a class="reference external" href="http://wiki.ros.org/robot_localization">ekf_localization_node</a>, which processes data from several sensor sources using an Extended Kalman filter (EKF). This includes data from the wheel encoders and IMU (if available).</p>
<div class="wy-table-responsive">
<table border="1" class="docutils">
<col width="25%">
<col width="75%">
<thead valign="bottom">
  <tr class="row-odd">
    <th class="head">Topic</th>
    <th class="head">Sources</th>
    <th class="head">Description</th>
  </tr>
 </thead>
 <tbody valign="top">
  <tr class="row-even">
    <td>husky_velocity_controller/odom</td>
    <td>husky_node</td>
    <td>Raw odometry as read from Husky encoders</td>
  </tr>
  <tr class="row-odd">
    <td>imu/data</td>
    <td>mu_filter_madgwick</td>
    <td>Orientation estimate from the IMU</td>
  </tr>
  <tr class="row-even">
    <td>odometry/filtered</td>
    <td>ekf_localization_node</td>
    <td>Fused odometry estimate (encoders and IMU)</td>
  </tr>
  </tbody>
</table>
</div><p>Additional odometry information sources can be added to the EKF in <a class="reference external" href="https://github.com/husky/husky_control/blob/indigo-devel/config/twist_mux.yaml">localization.yaml</a>.</p>
</div>
<div class="section" id="diagnostics">
<h2>Diagnostics<a class="headerlink" href="#diagnostics" title="Permalink to this headline">¶</a></h2>
<p>(Non-simulated only)</p>
<p>Husky provides hardware and software system <a class="reference external" href="http://wiki.ros.org/diagnostics">diagnostics</a> on the ROS standard /diagnostics topic. The best way to view these messages is using the <a class="reference external" href="http://wiki.ros.org/rqt_runtime_monitor">rqt_runtime_monitor</a> plugin. Run the rqt command, and select <strong>Plugins-&gt;Robot Tools-&gt;Runtime Monitor</strong> from the top menu.</p>
<p>The same information is also published as a <a class="reference external" href="http://docs.ros.org/api/husky_msgs/html/msg/HuskyStatus.html">husky_msgs/HuskyStatus</a> message on the status topic.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="HuskyMove.html" class="btn btn-neutral float-right" title="Husky Move Base Demo" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="SimulatingHusky.html" class="btn btn-neutral" title="Simulating Husky" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Clearpath Robotics.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>